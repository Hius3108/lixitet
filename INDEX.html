<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H√°i L·ªôc ƒê·∫ßu Xu√¢n</title>
    <style>
        /* --- C·∫§U H√åNH C∆† B·∫¢N --- */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #b71c1c;
            background-image: radial-gradient(circle, #d32f2f 10%, #880e4f 90%);
            color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden;
        }
        .container {
            background: #fff;
            color: #333;
            padding: 20px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            max-width: 400px;
            width: 90%;
            border: 4px solid #fdd835;
            position: relative;
            z-index: 1;
        }
        h1 { color: #d32f2f; margin: 0 0 10px 0; text-transform: uppercase; font-size: 22px; }
        p { color: #555; margin-bottom: 20px; font-size: 14px; }

        /* --- INPUT & BUTTON --- */
        input {
            width: 100%; padding: 12px; margin-bottom: 15px; border-radius: 25px;
            border: 2px solid #ddd; text-align: center; outline: none; box-sizing: border-box;
        }
        input:focus { border-color: #d32f2f; }
        .btn-primary {
            background: linear-gradient(45deg, #d32f2f, #f44336);
            color: #fff; width: 100%; padding: 12px; border: none; border-radius: 25px;
            cursor: pointer; font-size: 16px; font-weight: bold;
            box-shadow: 0 4px 10px rgba(211, 47, 47, 0.3); transition: 0.2s;
        }
        .btn-primary:active { transform: scale(0.95); }

        /* --- L∆Ø·ªöI L√å X√å --- */
        #lixiSection { display: none; }
        .lixi-grid {
            display: grid; 
            grid-template-columns: repeat(3, 1fr); /* 3 C·ªôt */
            gap: 10px; 
            margin-top: 15px;
        }
        .envelope-item {
            background: #e53935; height: 80px; border-radius: 8px; cursor: pointer;
            display: flex; justify-content: center; align-items: center;
            border: 2px solid #fdd835; position: relative; transition: 0.3s;
        }
        .envelope-item:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .envelope-item::after { content: "üßß"; font-size: 30px; }

        /* --- MODAL HI·ªÜU ·ª®NG M·ªû (L·ªõp ph·ªß) --- */
        #openModal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 999;
            justify-content: center; align-items: center; flex-direction: column;
        }
        
        /* Bao l√¨ x√¨ to */
        .big-envelope {
            width: 220px; height: 300px; background: #d32f2f;
            border-radius: 10px; position: relative;
            box-shadow: 0 0 20px #fdd835;
            display: flex; justify-content: center; align-items: center;
            border: 2px solid #fdd835;
            cursor: pointer;
        }
        /* N·∫Øp bao (trang tr√≠) */
        .big-envelope::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100px;
            background: #b71c1c; border-radius: 0 0 50% 50%; z-index: 1;
        }
        /* N√∫t M·ªü (h√¨nh tr√≤n v√†ng) */
        .open-btn {
            width: 70px; height: 70px; background: #fdd835; border-radius: 50%;
            position: absolute; top: 65px; z-index: 2;
            display: flex; justify-content: center; align-items: center;
            font-weight: bold; color: #d32f2f; font-size: 18px;
            border: 3px solid #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            animation: pulse 1.5s infinite;
        }

        /* --- K·∫æT QU·∫¢ --- */
        #resultSection { display: none; animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .money-display {
            font-size: 36px; color: #d32f2f; font-weight: 900; margin: 15px 0;
            text-shadow: 1px 1px 0 #fdd835;
        }
        .success-msg { color: #2e7d32; font-size: 13px; margin-top: 10px; font-style: italic; }

        /* --- ANIMATIONS (Hi·ªáu ·ª©ng) --- */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }
        .shaking { animation: shake 0.5s; }
        
        @keyframes popIn { from { transform: scale(0); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    </style>
</head>
<body>

<!-- Giao di·ªán ch√≠nh -->
<div class="container">
    <!-- B∆Ø·ªöC 1: NH·∫¨P T√äN -->
    <div id="inputSection">
        <h1>üßß ƒêi·ªÉm Danh Nh·∫≠n L√¨ X√¨</h1>
        <p>Ghi danh ƒë·ªÉ th·ª≠ v·∫≠n may ƒë·∫ßu nƒÉm</p>
        <input type="text" id="nameInput" placeholder="Nh·∫≠p t√™n c·ªßa b·∫°n..." required>
        <button class="btn-primary" onclick="chuyenBuoc2()">Tham Gia Ngay</button>
    </div>

    <!-- B∆Ø·ªöC 2: CH·ªåN BAO -->
    <div id="lixiSection">
        <h1>Ch·ªçn L√¨ X√¨</h1>
        <p>H√£y ch·ªçn m·ªôt bao l√¨ x√¨ ∆∞ng √Ω nh·∫•t</p>
        <div class="lixi-grid">
            <!-- 6 bao c≈© -->
            <div class="envelope-item" onclick="chuanBiMo()"></div>
            <div class="envelope-item" onclick="chuanBiMo()"></div>
            <div class="envelope-item" onclick="chuanBiMo()"></div>
            <div class="envelope-item" onclick="chuanBiMo()"></div>
            <div class="envelope-item" onclick="chuanBiMo()"></div>
            <div class="envelope-item" onclick="chuanBiMo()"></div>
            <!-- 3 bao m·ªõi th√™m -->
            <div class="envelope-item" onclick="chuanBiMo()"></div>
            <div class="envelope-item" onclick="chuanBiMo()"></div>
            <div class="envelope-item" onclick="chuanBiMo()"></div>
        </div>
    </div>

    <!-- B∆Ø·ªöC 3: K·∫æT QU·∫¢ -->
    <div id="resultSection">
        <h1>üéâ Ch√∫c M·ª´ng üéâ</h1>
        <p><b id="displayName"></b> ƒë√£ nh·∫≠n ƒë∆∞·ª£c:</p>
        <div class="money-display" id="luckyMoney">0ƒë</div>
    </div>
</div>

<!-- MODAL HI·ªÜU ·ª®NG M·ªû (·∫®n m·∫∑c ƒë·ªãnh) -->
<div id="openModal">
    <div style="color:white; margin-bottom: 20px; font-size: 20px; font-weight: bold;">B·∫•m ƒë·ªÉ m·ªü!</div>
    <div class="big-envelope" id="bigEnvelope" onclick="kichHoatMo()">
        <div class="open-btn">M·ªû</div>
    </div>
</div>

<script>
    // --- C·∫§U H√åNH ---
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycby5AKAYB7bN6spct4jc-kDaEvqb57DACFHy3TRCMZgyCGNNsR7Yx0I-s5BWhWRrAXHC/exec'; 
    
    // Danh s√°ch ti·ªÅn v√† t·ª∑ l·ªá (c√≥ th·ªÉ s·ª≠a)
    const listMoney = [
        '10.000 VNƒê', '10.000 VNƒê', '10.000 VNƒê', '10.000 VNƒê','10.000 VNƒê', '10.000 VNƒê', '10.000 VNƒê', '10.000 VNƒê',
        '20.000 VNƒê', '20.000 VNƒê', '20.000 VNƒê','20.000 VNƒê', '20.000 VNƒê', '20.000 VNƒê',
        '50.000 VNƒê', '50.000 VNƒê','50.000 VNƒê', '50.000 VNƒê',
        '100.000 VNƒê', '100.000 VNƒê',
        '200.000 VNƒê', 
    ];

    let userName = "";
    let selectedMoney = "";
    let isOpening = false; // Tr·∫°ng th√°i ƒëang m·ªü

    // --- B∆Ø·ªöC 1 -> 2 ---
    function chuyenBuoc2() {
        const input = document.getElementById('nameInput');
        userName = input.value.trim();
        if (!userName) { alert("Vui l√≤ng nh·∫≠p t√™n!"); return; }
        
        document.getElementById('inputSection').style.display = 'none';
        document.getElementById('lixiSection').style.display = 'block';
    }

    // --- B∆Ø·ªöC 2: CHU·∫®N B·ªä M·ªû (Hi·ªán Modal) ---
    function chuanBiMo() {
        // Random ti·ªÅn tr∆∞·ªõc
        const randomIndex = Math.floor(Math.random() * listMoney.length);
        selectedMoney = listMoney[randomIndex];

        // Hi·ªán popup bao to
        document.getElementById('openModal').style.display = 'flex';
    }

    // --- B∆Ø·ªöC 3: K√çCH HO·∫†T HI·ªÜU ·ª®NG RUNG V√Ä M·ªû ---
    function kichHoatMo() {
        if (isOpening) return;
        isOpening = true;

        const bigEnv = document.getElementById('bigEnvelope');
        
        // Th√™m class rung l·∫Øc
        bigEnv.classList.add('shaking');

        // Ch·ªù 0.8 gi√¢y cho hi·ªáu ·ª©ng rung xong m·ªõi hi·ªán k·∫øt qu·∫£
        setTimeout(() => {
            document.getElementById('openModal').style.display = 'none'; // T·∫Øt modal
            hienKetQua();
        }, 800);
    }

    // --- HI·ªÜN K·∫æT QU·∫¢ V√Ä G·ª¨I DATA ---
    function hienKetQua() {
        document.getElementById('lixiSection').style.display = 'none'; // ·∫®n l∆∞·ªõi
        document.getElementById('resultSection').style.display = 'block'; // Hi·ªán k·∫øt qu·∫£
        
        document.getElementById('displayName').innerText = userName;
        document.getElementById('luckyMoney').innerText = selectedMoney;

        // G·ª≠i v·ªÅ Google Sheet
        const statusMsg = document.getElementById('statusMsg');
        fetch(SCRIPT_URL, {
            method: 'POST',
            mode: 'no-cors',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ name: userName, money: selectedMoney })
        })
        
    }
</script>

</body>
</html>